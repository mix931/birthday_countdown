<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéÇ –û—Ç—Å—á—ë—Ç –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#7c5cff;
      --accent2:#2dd4bf;
      --muted:#9aa6bd;
      --glass: rgba(255,255,255,0.04);
      --success:#9be15d;
      --warning:#ffd166;
      --error:#ff6b6b;
      --overlay-bg: rgba(10, 15, 26, 0.95);
    }
    *{box-sizing:border-box; margin:0; padding:0;}
    html,body{height:100%; overflow-x:hidden;}
    
    body{
      margin:0; 
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      color:#e6eef8; 
      position:relative;
      min-height:100vh;
      background: 
        radial-gradient(circle at 10% 20%, rgba(124, 92, 255, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 90% 80%, rgba(45, 212, 191, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 50% 50%, rgba(155, 225, 93, 0.05) 0%, transparent 50%),
        linear-gradient(180deg, #0a0f1a 0%, #0f1724 50%, #0a0f1a 100%);
      background-attachment: fixed;
      display:flex; 
      align-items:center; 
      justify-content:center; 
      padding:20px;
      transition: background 0.5s ease;
    }

    /* –†–µ–∂–∏–º –æ—Ç—Å—á—ë—Ç–∞ - –∑–∞—Ç–µ–º–Ω—è–µ–º —Ñ–æ–Ω */
    body.countdown-mode {
      background: 
        radial-gradient(circle at 50% 50%, rgba(124, 92, 255, 0.1) 0%, transparent 50%),
        linear-gradient(180deg, #080c15 0%, #0d121f 50%, #080c15 100%);
    }

    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω —Å —á–∞—Å—Ç–∏—Ü–∞–º–∏ */
    #bg-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      opacity: 0.7;
      transition: opacity 0.5s ease;
    }

    body.countdown-mode #bg-canvas {
      opacity: 0.9;
    }

    /* –ü–ª–∞–≤–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      opacity: 0.5;
      transition: opacity 0.5s ease;
    }

    body.countdown-mode .floating-elements {
      opacity: 0.2;
    }

    .floating-element {
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(124, 92, 255, 0.1), rgba(45, 212, 191, 0.1));
      filter: blur(40px);
      animation: float 20s infinite linear;
    }

    .floating-element:nth-child(1) {
      width: 300px;
      height: 300px;
      top: 10%;
      left: 5%;
      animation-delay: 0s;
    }

    .floating-element:nth-child(2) {
      width: 200px;
      height: 200px;
      top: 60%;
      right: 10%;
      animation-delay: -5s;
      background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 107, 107, 0.1));
    }

    .floating-element:nth-child(3) {
      width: 150px;
      height: 150px;
      bottom: 20%;
      left: 15%;
      animation-delay: -10s;
      background: linear-gradient(135deg, rgba(155, 225, 93, 0.1), rgba(45, 212, 191, 0.1));
    }

    @keyframes float {
      0%, 100% {
        transform: translate(0, 0) rotate(0deg);
      }
      25% {
        transform: translate(20px, -20px) rotate(90deg);
      }
      50% {
        transform: translate(0, -40px) rotate(180deg);
      }
      75% {
        transform: translate(-20px, -20px) rotate(270deg);
      }
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .wrap{
      width:100%;
      max-width:1200px;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.03) 0%, 
        rgba(255, 255, 255, 0.01) 100%);
      border-radius:24px;
      padding:40px;
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: 
        0 20px 60px rgba(2, 6, 23, 0.8),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      z-index: 10;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –†–µ–∂–∏–º –æ—Ç—Å—á—ë—Ç–∞ - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    body.countdown-mode .wrap {
      max-width: 1400px;
      padding: 50px;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.02) 0%, 
        rgba(255, 255, 255, 0.005) 100%);
      backdrop-filter: blur(30px);
    }

    /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç */
    .wrap::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
    }

    .wrap::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 50% 0%, rgba(124, 92, 255, 0.05), transparent 50%);
      pointer-events: none;
      z-index: -1;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
    .header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .header h1 {
      font-size: 2.8rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      letter-spacing: -0.5px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .header p {
      color: var(--muted);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.6;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
    body.countdown-mode .header {
      opacity: 0;
      height: 0;
      margin: 0;
      overflow: hidden;
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–∞–π–º–µ—Ä–æ–º */
    .card{
      display:flex;
      gap: 50px;
      align-items:center;
      justify-content:space-between;
      padding: 30px;
      border-radius:20px;
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      margin-bottom: 30px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    body.countdown-mode .card {
      flex-direction: column;
      gap: 60px;
      padding: 60px 40px;
      background: rgba(255, 255, 255, 0.01);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    .left{flex:1; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);}
    
    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ –ª–µ–≤–∞—è —á–∞—Å—Ç—å –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
    body.countdown-mode .left {
      flex: none;
      width: 100%;
    }
    
    .countdown{
      display:flex;
      gap:15px;
      align-items:center;
      justify-content:center;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏ –æ—Ç—Å—Ç—É–ø—ã */
    body.countdown-mode .countdown {
      gap: 30px;
    }
    
    .timebox{
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.03), 
        rgba(255, 255, 255, 0.01));
      border-radius:16px;
      padding:25px 20px;
      min-width:110px;
      text-align:center;
      border: 1px solid rgba(255, 255, 255, 0.05);
      position:relative;
      overflow:hidden;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      flex: 1;
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ */
    body.countdown-mode .timebox {
      min-width: 180px;
      padding: 40px 30px;
      border-radius: 24px;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.02), 
        rgba(255, 255, 255, 0.005));
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    .timebox::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }

    .timebox:hover::before {
      transform: scaleX(1);
    }

    .timebox:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(124, 92, 255, 0.2);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —É–±–∏—Ä–∞–µ–º —Ö–æ–≤–µ—Ä-—ç—Ñ—Ñ–µ–∫—Ç */
    body.countdown-mode .timebox:hover {
      transform: none;
      box-shadow: none;
    }

    .num{
      font-weight:800;
      font-size:42px;
      background: linear-gradient(135deg, #fff, var(--muted));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -1px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–∏—Ñ—Ä—ã */
    body.countdown-mode .num {
      font-size: 72px;
      background: linear-gradient(135deg, #fff, var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .label{
      font-size:13px;
      color:var(--muted);
      margin-top:10px;
      text-transform:uppercase;
      letter-spacing:1px;
      font-weight:600;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–¥–ø–∏—Å–∏ */
    body.countdown-mode .label {
      font-size: 16px;
      margin-top: 15px;
      color: var(--accent2);
      font-weight: 700;
    }

    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    .controls{
      display:flex;
      flex-direction:column;
      gap:20px;
      align-items:stretch;
      min-width:320px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —Å–∫—Ä—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    body.countdown-mode .controls {
      opacity: 0;
      height: 0;
      min-width: 0;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    
    .input-group{
      display:flex;
      flex-direction:column;
      gap:10px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .input-group label{
      font-size:14px;
      color:var(--muted);
      font-weight:600;
      display:flex;
      align-items:center;
      gap:8px;
    }
    
    .input-group label::before {
      content: 'üìÖ';
      font-size: 16px;
    }
    
    input[type=datetime-local]{
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      padding:16px 18px;
      border-radius:12px;
      color:inherit;
      font-size:15px;
      width:100%;
      transition: all 0.3s ease;
      font-family: inherit;
    }
    
    input[type=datetime-local]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(124, 92, 255, 0.2);
      background: rgba(255, 255, 255, 0.05);
    }
    
    .button-group{
      display:flex;
      gap:12px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ */
    .reset-only {
      display: none;
      position: absolute;
      bottom: 30px;
      right: 30px;
      z-index: 100;
    }

    body.countdown-mode .reset-only {
      display: flex;
    }
    
    .btn{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border:none;
      padding:18px 24px;
      border-radius:14px;
      color:#021020;
      font-weight:700;
      cursor:pointer;
      white-space:nowrap;
      flex:1;
      font-size:16px;
      transition: all 0.3s ease;
      position:relative;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s ease;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover{
      transform:translateY(-3px);
      box-shadow:0 10px 30px rgba(124, 92, 255, 0.4);
    }
    
    .btn:active{
      transform:translateY(-1px);
    }
    
    .btn.reset{
      background: linear-gradient(135deg, #6b7280, #4b5563);
    }
    
    .btn.reset:hover {
      box-shadow:0 10px 30px rgba(107, 114, 128, 0.3);
    }

    .btn-icon {
      font-size: 18px;
    }

    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–≥–æ–Ω—å–∫–∏ */
    .sparkles {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      opacity: 0.5;
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      filter: blur(1px);
      animation: sparkle 3s infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ */
    .celebrate{
      position:absolute;
      inset:0;
      pointer-events:none;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      z-index: 20;
    }
    
    .message{
      font-size:60px;
      font-weight:800;
      text-shadow:0 10px 40px rgba(0,0,0,0.8);
      display:none;
      background: linear-gradient(135deg, #ff6b6b, #ffd166, #7c5cff, #2dd4bf, #9be15d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: rainbow 3s linear infinite;
      background-size: 400% 100%;
    }

    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .popper{
      position:absolute;
      opacity:0;
      transform:translateY(20px) scale(0.8);
      transition:transform .7s,opacity .3s;
      font-size:120px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
    }
    
    .popper.show{
      opacity:1;
      transform:translateY(-40px) scale(1);
    }

    /* –§—É—Ç–µ—Ä */
    footer{
      margin-top:30px;
      color:var(--muted);
      font-size:14px;
      text-align:center;
      padding:20px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ —Å–∫—Ä—ã–≤–∞–µ–º —Ñ—É—Ç–µ—Ä */
    body.countdown-mode footer {
      opacity: 0;
      height: 0;
      padding: 0;
      margin: 0;
      overflow: hidden;
      border: none;
    }

    footer::before {
      content: '‚ú®';
      display: block;
      font-size: 20px;
      margin-bottom: 10px;
    }

    /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ canvas */
    #confettiCanvas{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index: 15;
    }

    /* –û–í–ï–†–õ–ï–ô –° –ü–û–ó–î–†–ê–í–õ–ï–ù–ò–ï–ú */
    .overlay{
      position: fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background: var(--overlay-bg);
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      visibility:hidden;
      transition:opacity 0.5s ease, visibility 0.5s;
      z-index:9999;
      overflow: hidden;
    }
    
    .overlay::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(124, 92, 255, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(45, 212, 191, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(155, 225, 93, 0.08) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .overlay.show{
      opacity:1;
      visibility:visible;
    }
    
    .overlay-content{
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 800px;
      padding: 60px;
      background: rgba(15, 23, 36, 0.7);
      backdrop-filter: blur(30px);
      border-radius: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 
        0 40px 80px rgba(0, 0, 0, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    
    .overlay-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
    }
    
    .birthday-title {
      font-size: 64px;
      font-weight: 800;
      margin-bottom: 30px;
      background: linear-gradient(135deg, #ff6b6b, #ffd166, #7c5cff, #2dd4bf, #9be15d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: rainbow 3s linear infinite;
      background-size: 400% 100%;
      letter-spacing: -1px;
      line-height: 1.2;
    }
    
    .birthday-subtitle {
      font-size: 24px;
      color: var(--muted);
      margin-bottom: 40px;
      line-height: 1.5;
      font-weight: 400;
    }
    
    .celebration-icons {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
      font-size: 48px;
      animation: float-icons 3s ease-in-out infinite;
    }
    
    .celebration-icons span {
      animation-delay: calc(var(--i) * 0.2s);
    }
    
    @keyframes float-icons {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    
    .close-overlay {
      margin-top: 40px;
      padding: 16px 32px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
    }
    
    .close-overlay:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(124, 92, 255, 0.4);
    }

    /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ */
    .countdown-indicator {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: var(--accent2);
      font-size: 14px;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.5s ease;
      background: rgba(255, 255, 255, 0.05);
      padding: 8px 16px;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
    }

    body.countdown-mode .countdown-indicator {
      opacity: 1;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 968px) {
      .card{
        flex-direction:column;
        gap:30px;
      }
      
      .controls{
        min-width:100%;
      }
      
      .timebox{
        min-width:90px;
        padding:20px 15px;
      }
      
      .num{
        font-size:36px;
      }
      
      /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö */
      body.countdown-mode .num {
        font-size: 56px;
      }
      
      body.countdown-mode .timebox {
        min-width: 140px;
        padding: 30px 20px;
      }
      
      .wrap{
        padding:30px;
      }
      
      .header h1 {
        font-size: 2.2rem;
      }
      
      .overlay-content {
        padding: 40px;
        margin: 20px;
      }
      
      .birthday-title {
        font-size: 48px;
      }
      
      .birthday-subtitle {
        font-size: 20px;
      }
    }

    @media (max-width: 768px) {
      body.countdown-mode .countdown {
        flex-wrap: wrap;
        gap: 20px;
      }
      
      body.countdown-mode .timebox {
        flex: 0 0 calc(50% - 10px);
        min-width: 120px;
      }
      
      body.countdown-mode .num {
        font-size: 48px;
      }
      
      body.countdown-mode .label {
        font-size: 14px;
      }
      
      .reset-only {
        bottom: 20px;
        right: 20px;
      }
    }

    @media (max-width: 640px) {
      .countdown{
        flex-wrap:wrap;
        justify-content:center;
      }
      
      .timebox{
        flex:0 0 calc(50% - 10px);
        margin-bottom:10px;
      }
      
      .button-group{
        flex-direction:column;
      }
      
      .header h1 {
        font-size: 1.8rem;
      }
      
      .header p {
        font-size: 1rem;
      }
      
      .message {
        font-size: 40px;
      }
      
      .overlay-content {
        padding: 30px 20px;
      }
      
      .birthday-title {
        font-size: 36px;
      }
      
      .birthday-subtitle {
        font-size: 18px;
      }
      
      .celebration-icons {
        font-size: 36px;
        gap: 20px;
      }
      
      /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
      body.countdown-mode .timebox {
        flex: 0 0 calc(50% - 10px);
        min-width: 100px;
        padding: 25px 15px;
      }
      
      body.countdown-mode .num {
        font-size: 36px;
      }
      
      body.countdown-mode .label {
        font-size: 12px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .wrap {
        padding: 20px;
        border-radius: 20px;
      }
      
      .card {
        padding: 20px;
      }
      
      .timebox {
        min-width: 70px;
        padding: 15px 10px;
      }
      
      .num {
        font-size: 28px;
      }
      
      .label {
        font-size: 11px;
      }
      
      .birthday-title {
        font-size: 32px;
      }
      
      .birthday-subtitle {
        font-size: 16px;
      }
      
      /* –í —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö */
      body.countdown-mode .timebox {
        padding: 20px 10px;
        min-width: 80px;
      }
      
      body.countdown-mode .num {
        font-size: 28px;
      }
      
      body.countdown-mode .label {
        font-size: 10px;
      }
      
      .reset-only {
        padding: 12px 20px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
  <canvas id="bg-canvas"></canvas>
  
  <!-- –ü–ª–∞–≤–∞—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
  <div class="floating-elements">
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
  </div>

  <!-- –û–í–ï–†–õ–ï–ô –° –ü–û–ó–î–†–ê–í–õ–ï–ù–ò–ï–ú -->
  <div id="overlay" class="overlay">
    <div class="overlay-content">
      <h1 class="birthday-title">üéâ –° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéÇ</h1>
      <p class="birthday-subtitle">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å —Å–∞–º—ã–º –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º –¥–Ω—ë–º –≤ –≥–æ–¥—É!<br>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç –º–Ω–æ–≥–æ —Ä–∞–¥–æ—Å—Ç–∏, —É—Å–ø–µ—Ö–æ–≤ –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤!</p>
      
      <div class="celebration-icons">
        <span style="--i:0">üéÇ</span>
        <span style="--i:1">üéÅ</span>
        <span style="--i:2">üéà</span>
        <span style="--i:3">‚ú®</span>
        <span style="--i:4">ü•≥</span>
      </div>
      
      <button class="close-overlay" id="closeOverlay">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="wrap">
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ç—Å—á—ë—Ç–∞ -->
    <div class="countdown-indicator">
      ‚è≥ –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –∑–∞–ø—É—â–µ–Ω
    </div>
    
    <!-- –û–≥–æ–Ω—å–∫–∏ -->
    <div class="sparkles" id="sparkles"></div>
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="header">
      <h1>üéÇ –û—Ç—Å—á—ë—Ç –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è</h1>
      <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞—Ç—É –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á—ë—Ç–æ–º –¥–æ —Å–∞–º–æ–≥–æ –≤–∞–∂–Ω–æ–≥–æ –¥–Ω—è –≤ –≥–æ–¥—É!</p>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–∞–π–º–µ—Ä–æ–º -->
    <div class="card">
      <div class="left">
        <div class="countdown">
          <div class="timebox"><div class="num" id="days">0</div><div class="label">–î–Ω–∏</div></div>
          <div class="timebox"><div class="num" id="hours">00</div><div class="label">–ß–∞—Å—ã</div></div>
          <div class="timebox"><div class="num" id="minutes">00</div><div class="label">–ú–∏–Ω—É—Ç—ã</div></div>
          <div class="timebox"><div class="num" id="seconds">00</div><div class="label">–°–µ–∫—É–Ω–¥—ã</div></div>
        </div>
      </div>

      <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
      <div class="controls">
        <div class="input-group">
          <label for="targetInput">–î–∞—Ç–∞ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <input id="targetInput" type="datetime-local">
        </div>
        <div class="button-group">
          <button id="startBtn" class="btn">
            <span class="btn-icon">‚ñ∂Ô∏è</span>
            <span>–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç—Å—á—ë—Ç</span>
          </button>
          <button id="resetBtn" class="btn reset">
            <span class="btn-icon">üîÑ</span>
            <span>–°–±—Ä–æ—Å</span>
          </button>
        </div>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞ -->
    <div class="reset-only">
      <button id="resetCountdownBtn" class="btn reset">
        <span class="btn-icon">üîÑ</span>
        <span>–°–±—Ä–æ—Å–∏—Ç—å –æ—Ç—Å—á—ë—Ç</span>
      </button>
    </div>

    <!-- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏—è -->
    <div class="celebrate" id="celebrate">
      <div id="message" class="message">üéÇ –° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéâ</div>
      <div id="popper" class="popper">üéâ</div>
    </div>

    <!-- Canvas –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
    <canvas id="confettiCanvas"></canvas>
    
    <!-- –§—É—Ç–µ—Ä -->
    <footer>
      –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞—Ç—É –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç—Å—á—ë—Ç"<br>
      –ö–æ–≥–¥–∞ –æ—Ç—Å—á—ë—Ç –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –Ω—É–ª—è ‚Äî –Ω–∞—á–Ω—ë—Ç—Å—è –ø—Ä–∞–∑–¥–Ω–∏–∫!
    </footer>
  </div>

<script>
const $ = s => document.querySelector(s);
const $days = $('#days'), $hours = $('#hours'), $minutes = $('#minutes'), $seconds = $('#seconds');
const $start = $('#startBtn'), $reset = $('#resetBtn'), $resetCountdownBtn = $('#resetCountdownBtn'), $input = $('#targetInput');
const $message = $('#message'), $popper = $('#popper'), $celebrate = $('#celebrate');
const $overlay = $('#overlay'), $sparkles = $('#sparkles'), $closeOverlay = $('#closeOverlay');
const $body = $('body');

let timerId = null;
let celebrating = false;
let currentTarget = null;
let countdownMode = false;

// ==================== –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–´–ô –§–û–ù ====================
const bgCanvas = $('#bg-canvas');
const bgCtx = bgCanvas.getContext('2d');
let particles = [];
let sparkles = [];

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü
function initBackground() {
  bgCanvas.width = window.innerWidth;
  bgCanvas.height = window.innerHeight;
  
  // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è —Ñ–æ–Ω–∞
  particles = [];
  for (let i = 0; i < 50; i++) {
    particles.push({
      x: Math.random() * bgCanvas.width,
      y: Math.random() * bgCanvas.height,
      size: Math.random() * 3 + 1,
      speed: Math.random() * 0.5 + 0.2,
      color: `rgba(${Math.floor(Math.random() * 100 + 155)}, ${Math.floor(Math.random() * 100 + 155)}, 255, ${Math.random() * 0.3 + 0.1})`,
      direction: Math.random() * Math.PI * 2
    });
  }
  
  // –°–æ–∑–¥–∞–µ–º –æ–≥–æ–Ω—å–∫–∏
  createSparkles();
}

// –°–æ–∑–¥–∞–Ω–∏–µ –æ–≥–æ–Ω—å–∫–æ–≤
function createSparkles() {
  sparkles = [];
  for (let i = 0; i < 15; i++) {
    sparkles.push({
      x: Math.random() * 100,
      y: Math.random() * 100,
      size: Math.random() * 3 + 1,
      speed: Math.random() * 0.5 + 0.2,
      opacity: Math.random() * 0.5 + 0.3,
      delay: Math.random() * 3
    });
  }
  
  // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–≥–æ–Ω—å–∫–∏ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
  sparkles.forEach(sparkle => {
    const el = document.createElement('div');
    el.className = 'sparkle';
    el.style.left = `${sparkle.x}%`;
    el.style.top = `${sparkle.y}%`;
    el.style.width = `${sparkle.size}px`;
    el.style.height = `${sparkle.size}px`;
    el.style.animationDelay = `${sparkle.delay}s`;
    el.style.backgroundColor = `rgba(255, 255, 255, ${sparkle.opacity})`;
    $sparkles.appendChild(el);
  });
}

// –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü
function animateBackground() {
  bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
  
  // –†–∏—Å—É–µ–º —á–∞—Å—Ç–∏—Ü—ã
  particles.forEach(p => {
    p.x += Math.cos(p.direction) * p.speed;
    p.y += Math.sin(p.direction) * p.speed;
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—Ü
    if (p.x < 0) p.x = bgCanvas.width;
    if (p.x > bgCanvas.width) p.x = 0;
    if (p.y < 0) p.y = bgCanvas.height;
    if (p.y > bgCanvas.height) p.y = 0;
    
    // –†–∏—Å—É–µ–º —á–∞—Å—Ç–∏—Ü—É
    bgCtx.beginPath();
    bgCtx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    bgCtx.fillStyle = p.color;
    bgCtx.fill();
    
    // –°–æ–µ–¥–∏–Ω—è–µ–º –±–ª–∏–∑–∫–∏–µ —á–∞—Å—Ç–∏—Ü—ã –ª–∏–Ω–∏—è–º–∏
    particles.forEach(other => {
      const dx = p.x - other.x;
      const dy = p.y - other.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      if (distance < 100) {
        bgCtx.beginPath();
        bgCtx.moveTo(p.x, p.y);
        bgCtx.lineTo(other.x, other.y);
        bgCtx.strokeStyle = `rgba(124, 92, 255, ${0.1 * (1 - distance / 100)})`;
        bgCtx.lineWidth = 0.5;
        bgCtx.stroke();
      }
    });
  });
  
  requestAnimationFrame(animateBackground);
}

// ==================== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê ====================

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π)
function defaultTarget(){
  const now = new Date();
  const futureDate = new Date(now);
  futureDate.setDate(futureDate.getDate() + 30); // –ß–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
  futureDate.setHours(12, 0, 0, 0); // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –ø–æ–ª–¥–µ–Ω—å
  return futureDate;
}

function prefill(date){
  const p = n=>String(n).padStart(2,'0');
  $input.value = `${date.getFullYear()}-${p(date.getMonth()+1)}-${p(date.getDate())}T${p(date.getHours())}:${p(date.getMinutes())}`;
}

function updateCountdown(t){
  const now = new Date();
  let diff = t - now;
  
  // –ï—Å–ª–∏ –¥–∞—Ç–∞ —É–∂–µ –ø—Ä–æ—à–ª–∞, –ø—Ä–∞–∑–¥–Ω—É–µ–º
  if(diff <= 0 && !celebrating) {
    triggerCelebration();
    return;
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä
  $days.textContent = Math.floor(diff/86400000);
  $hours.textContent = String(Math.floor(diff/3600000)%24).padStart(2,'0');
  $minutes.textContent = String(Math.floor(diff/60000)%60).padStart(2,'0');
  $seconds.textContent = String(Math.floor(diff/1000)%60).padStart(2,'0');
}

function startTimer(t){
  stopTimer();
  currentTarget = t;
  updateCountdown(t);
  timerId = setInterval(()=>updateCountdown(t), 250);
}

function stopTimer(){ 
  if(timerId){
    clearInterval(timerId);
    timerId=null;
  } 
}

// ==================== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –†–ï–ñ–ò–ú–û–í ====================

// –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç—Å—á—ë—Ç–∞
function enableCountdownMode() {
  countdownMode = true;
  $body.classList.add('countdown-mode');
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞—Ç—É –≤ localStorage
  if (currentTarget) {
    localStorage.setItem('birthdayCountdownDate', currentTarget.getTime());
    localStorage.setItem('birthdayCountdownMode', 'true');
  }
}

// –û—Ç–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç—Å—á—ë—Ç–∞
function disableCountdownMode() {
  countdownMode = false;
  $body.classList.remove('countdown-mode');
  localStorage.removeItem('birthdayCountdownDate');
  localStorage.removeItem('birthdayCountdownMode');
}

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç—Å—á—ë—Ç
function checkSavedCountdown() {
  const savedDate = localStorage.getItem('birthdayCountdownDate');
  const savedMode = localStorage.getItem('birthdayCountdownMode');
  
  if (savedDate && savedMode === 'true') {
    const targetDate = new Date(parseInt(savedDate));
    const now = new Date();
    
    // –ï—Å–ª–∏ –¥–∞—Ç–∞ –µ—â—ë –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª–∞, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç—Å—á—ë—Ç
    if (targetDate > now) {
      currentTarget = targetDate;
      prefill(targetDate);
      startTimer(targetDate);
      enableCountdownMode();
      return true;
    } else {
      // –ï—Å–ª–∏ –¥–∞—Ç–∞ –ø—Ä–æ—à–ª–∞, –æ—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
      localStorage.removeItem('birthdayCountdownDate');
      localStorage.removeItem('birthdayCountdownMode');
    }
  }
  return false;
}

// ==================== –ö–û–ù–§–ï–¢–¢–ò ====================
const canvas = $('#confettiCanvas');
const ctx = canvas.getContext('2d');
let confettiParticles = [];

function resizeCanvas(){ 
  canvas.width = window.innerWidth; 
  canvas.height = window.innerHeight; 
}
window.addEventListener('resize', resizeCanvas); 
resizeCanvas();

function rand(a,b){ return Math.random()*(b-a)+a; }

function spawnConfettiBurst(x,dir){
  const colors=['#ff6b6b','#ffd166','#7c5cff','#2dd4bf','#9be15d','#ffb3e6'];
  for(let i=0;i<80;i++){
    confettiParticles.push({
      x, y:canvas.height,
      vx: rand(-8,8)*dir,
      vy: rand(-22,-10),
      size: rand(10,20),
      rot: rand(0,6.28),
      shape: ['circle','triangle','ribbon'][Math.floor(rand(0,3))],
      color: colors[Math.floor(rand(0,colors.length))],
      life: rand(80,200)
    });
  }
}

function spawnRain(count=200){
  const colors=['#7c5cff','#2dd4bf','#ffd166','#ff6b6b','#9be15d'];
  for(let i=0;i<count;i++){
    confettiParticles.push({
      x: rand(0,canvas.width),
      y: rand(-canvas.height,0),
      vx: rand(-1.5,1.5),
      vy: rand(4,10),
      size: rand(8,18),
      rot: rand(0,6.28),
      shape: ['circle','triangle','ribbon'][Math.floor(rand(0,3))],
      color: colors[Math.floor(rand(0,colors.length))],
      life: rand(80,250)
    });
  }
}

function drawConfettiParticle(p){
  ctx.save();
  ctx.translate(p.x,p.y);
  ctx.rotate(p.rot);
  ctx.globalAlpha=Math.max(p.life/250,0);
  if(p.shape==='circle'){ 
    ctx.beginPath(); 
    ctx.fillStyle=p.color; 
    ctx.arc(0,0,p.size/2,0,6.28); 
    ctx.fill(); 
  }
  else if(p.shape==='triangle'){ 
    ctx.fillStyle=p.color; 
    ctx.beginPath(); 
    ctx.moveTo(-p.size/2,p.size/2); 
    ctx.lineTo(p.size/2,p.size/2); 
    ctx.lineTo(0,-p.size/2); 
    ctx.fill(); 
  }
  else if(p.shape==='ribbon'){ 
    ctx.fillStyle=p.color; 
    ctx.fillRect(-p.size/2,-p.size/6,p.size,p.size/3); 
  }
  ctx.restore();
}

function animateConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(let i=confettiParticles.length-1;i>=0;i--){
    const p=confettiParticles[i];
    p.x+=p.vx; 
    p.y+=p.vy; 
    p.vy+=0.15; 
    p.rot+=0.05; 
    p.life--;
    drawConfettiParticle(p);
    if(p.life<=0||p.y>canvas.height+50) confettiParticles.splice(i,1);
  }
  requestAnimationFrame(animateConfetti);
}
animateConfetti();

// ==================== –ó–í–£–ö ====================
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
function playCelebrationSound(){
  if(audioCtx.state === 'suspended') {
    audioCtx.resume();
  }
  
  try{
    // –°–æ–∑–¥–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–≤—É–∫–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞
    for(let i=0;i<5;i++){
      setTimeout(() => {
        const o=audioCtx.createOscillator();
        const g=audioCtx.createGain();
        o.type='sine';
        o.frequency.value=600 + i*200;
        g.gain.value=0.2;
        o.connect(g); 
        g.connect(audioCtx.destination);
        o.start(); 
        o.stop(audioCtx.currentTime+0.3);
      }, i*100);
    }
  }catch(e){
    console.log("Audio error:", e);
  }
}

// ==================== –ü–†–ê–ó–î–ù–û–í–ê–ù–ò–ï ====================
function triggerCelebration(){
  if(celebrating) return;
  
  celebrating = true;
  stopTimer();
  
  // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–∂–∏–º–∞ –æ—Ç—Å—á—ë—Ç–∞
  disableCountdownMode();
  
  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
  $message.style.display='block';
  
  // –ü–æ–∫–∞–∑–∞—Ç—å –æ–≤–µ—Ä–ª–µ–π
  $overlay.classList.add("show");
  
  // –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
  spawnRain(300);
  spawnConfettiBurst(canvas.width*0.2,-1);
  spawnConfettiBurst(canvas.width*0.8,1);
  
  // –ó–≤—É–∫
  playCelebrationSound();
}

// –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –æ–≤–µ—Ä–ª–µ—è
function closeCelebration() {
  $overlay.classList.remove("show");
  $message.style.display = 'none';
  celebrating = false;
  
  // –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –¥–∞—Ç—É
  if(currentTarget) {
    const nextYear = new Date(currentTarget);
    nextYear.setFullYear(nextYear.getFullYear() + 1);
    prefill(nextYear);
    startTimer(nextYear);
    enableCountdownMode();
  } else {
    const d = defaultTarget();
    prefill(d);
    startTimer(d);
  }
}

// ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
function init() {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–∞
  initBackground();
  animateBackground();
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç—Å—á—ë—Ç
  const hasSavedCountdown = checkSavedCountdown();
  
  if (!hasSavedCountdown) {
    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    const initialDate = defaultTarget();
    prefill(initialDate);
    
    // –ù–∞—á–∞—Ç—å –æ—Ç—Å—á–µ—Ç
    startTimer(initialDate);
  }
  
  // –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–≤–µ—Ä–ª–µ–π —Å–∫—Ä—ã—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
  $overlay.classList.remove("show");
  $message.style.display = 'none';
}

// ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ====================
$start.onclick = ()=>{
  let t = new Date($input.value);
  if(isNaN(t)) {
    alert('–ù–µ–≤–µ—Ä–Ω–∞—è –¥–∞—Ç–∞');
    return;
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –ø—Ä–æ—à–ª–∞ –ª–∏ –¥–∞—Ç–∞
  const now = new Date();
  if(t <= now) {
    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –≤ –±—É–¥—É—â–µ–º');
    return;
  }
  
  celebrating = false;
  $message.style.display = 'none';
  $overlay.classList.remove("show");
  startTimer(t);
  
  // –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –æ—Ç—Å—á—ë—Ç–∞
  enableCountdownMode();
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
$reset.onclick = ()=>{
  celebrating = false;
  $message.style.display = 'none';
  $overlay.classList.remove("show");
  
  // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–∂–∏–º–∞ –æ—Ç—Å—á—ë—Ç–∞
  disableCountdownMode();
  
  const d = defaultTarget();
  prefill(d);
  startTimer(d);
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–±—Ä–æ—Å–∞ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç—Å—á—ë—Ç–∞
$resetCountdownBtn.onclick = ()=>{
  celebrating = false;
  $message.style.display = 'none';
  $overlay.classList.remove("show");
  
  // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–∂–∏–º–∞ –æ—Ç—Å—á—ë—Ç–∞
  disableCountdownMode();
  
  const d = defaultTarget();
  prefill(d);
  startTimer(d);
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–≤–µ—Ä–ª–µ—è
$closeOverlay.onclick = closeCelebration;

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–≤–µ—Ä–ª–µ—è —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
$overlay.addEventListener('show', () => {
  setTimeout(closeCelebration, 15000);
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
window.addEventListener('resize', () => {
  bgCanvas.width = window.innerWidth;
  bgCanvas.height = window.innerHeight;
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

// –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
window.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>